[
  {
    "table_name": "attached_quizzes",
    "columns": [
      {
        "type": "integer",
        "column": "passing_score",
        "default": "70",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "title",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "note_item_id",
        "default": null,
        "nullable": "YES"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Admins full access quizzes"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone view quizzes"
      }
    ]
  },
  {
    "table_name": "contemporary_mistakes",
    "columns": [
      {
        "type": "boolean",
        "column": "is_mastered",
        "default": "false",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "retake_count",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "confidence_level",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "correct_answer",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "correct_answer_text",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "explanation",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "option_a",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "option_b",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "option_c",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "option_d",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "question_id",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "question_text",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "subject",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "topic",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "user_answer",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "user_answer_text",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "DELETE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can delete own mistakes"
      },
      {
        "roles": [
          "public"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can insert own mistakes"
      },
      {
        "roles": [
          "public"
        ],
        "command": "UPDATE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can update own mistakes"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can view own mistakes"
      }
    ]
  },
  {
    "table_name": "courses",
    "columns": [
      {
        "type": "boolean",
        "column": "is_active",
        "default": "false",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "order_index",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "price",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "version",
        "default": "1",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "description",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "icon",
        "default": "'ðŸ“š'::text",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "name",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Admins full access courses"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone view active courses"
      }
    ]
  },
  {
    "table_name": "draft_content_cache",
    "columns": [
      {
        "type": "jsonb",
        "column": "draft_data",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "original_content_id",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": "auth.uid()",
        "nullable": "YES"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Enable all access for authenticated users"
      }
    ]
  },
  {
    "table_name": "note_contents",
    "columns": [
      {
        "type": "text",
        "column": "content_html",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "tsvector",
        "column": "search_vector",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "item_id",
        "default": null,
        "nullable": "YES"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Admins full access notes"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone view notes"
      }
    ]
  },
  {
    "table_name": "quiz_attempts",
    "columns": [
      {
        "type": "boolean",
        "column": "passed",
        "default": "false",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "score",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "jsonb",
        "column": "answers",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "completed_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "quiz_id",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": null,
        "nullable": "YES"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Admins view all attempts"
      },
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Users manage own attempts"
      }
    ]
  },
  {
    "table_name": "quiz_questions",
    "columns": [
      {
        "type": "integer",
        "column": "order_index",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "jsonb",
        "column": "options",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "correct_answer",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "explanation",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "question_text",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "question_type",
        "default": "'single_choice'::text",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "quiz_id",
        "default": null,
        "nullable": "YES"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Admins full access questions"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone view questions"
      }
    ]
  },
  {
    "table_name": "quizzes",
    "columns": [
      {
        "type": "text",
        "column": "content",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "item_id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "DELETE",
        "permissive": "PERMISSIVE",
        "policy_name": "Enable delete for authenticated users"
      },
      {
        "roles": [
          "public"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Enable insert for authenticated users"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Enable read access for all users"
      },
      {
        "roles": [
          "public"
        ],
        "command": "UPDATE",
        "permissive": "PERMISSIVE",
        "policy_name": "Enable update for authenticated users"
      }
    ]
  },
  {
    "table_name": "streak_bonuses",
    "columns": [
      {
        "type": "integer",
        "column": "bonus_points",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "integer",
        "column": "streak_days",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "badge_emoji",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "badge_name",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone can view bonuses"
      }
    ]
  },
  {
    "table_name": "structure_items",
    "columns": [
      {
        "type": "boolean",
        "column": "is_active",
        "default": "true",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "order_index",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "description",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "icon",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "item_type",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "title",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "course_id",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "parent_id",
        "default": null,
        "nullable": "YES"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "ALL",
        "permissive": "PERMISSIVE",
        "policy_name": "Admins full access structure"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone view structure"
      }
    ]
  },
  {
    "table_name": "user_completed_items",
    "columns": [
      {
        "type": "timestamp with time zone",
        "column": "completed_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "course_id",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "item_id",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "DELETE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can delete own completed items"
      },
      {
        "roles": [
          "public"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can insert own completed items"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can view own completed items"
      }
    ]
  },
  {
    "table_name": "user_courses",
    "columns": [
      {
        "type": "text",
        "column": "course_id",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "status",
        "default": "'active'::text",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "purchase_date",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can insert their own courses"
      },
      {
        "roles": [
          "public"
        ],
        "command": "UPDATE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can update their own courses"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can view their own courses"
      }
    ]
  },
  {
    "table_name": "user_points",
    "columns": [
      {
        "type": "date",
        "column": "month",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "integer",
        "column": "all_time_points",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "monthly_points",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "username",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone can view leaderboard points"
      },
      {
        "roles": [
          "authenticated"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can insert own points"
      },
      {
        "roles": [
          "authenticated"
        ],
        "command": "UPDATE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can update own points"
      }
    ]
  },
  {
    "table_name": "user_streaks",
    "columns": [
      {
        "type": "ARRAY",
        "column": "bonuses_claimed",
        "default": "'{}'::integer[]",
        "nullable": "YES"
      },
      {
        "type": "date",
        "column": "last_activity_date",
        "default": "CURRENT_DATE",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "current_streak",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "longest_streak",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "total_cases_studied",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "total_pyq_attempted",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "total_quizzes_completed",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "total_score",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "username",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": "gen_random_uuid()",
        "nullable": "NO"
      },
      {
        "type": "uuid",
        "column": "user_id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Everyone can view leaderboard"
      },
      {
        "roles": [
          "authenticated"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can create own streak"
      },
      {
        "roles": [
          "authenticated"
        ],
        "command": "DELETE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can delete own streak"
      },
      {
        "roles": [
          "authenticated"
        ],
        "command": "UPDATE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can update own streak"
      }
    ]
  },
  {
    "table_name": "users",
    "columns": [
      {
        "type": "boolean",
        "column": "dark_mode",
        "default": "false",
        "nullable": "YES"
      },
      {
        "type": "boolean",
        "column": "is_admin",
        "default": "false",
        "nullable": "YES"
      },
      {
        "type": "date",
        "column": "last_activity_date",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "longest_streak",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "streak_count",
        "default": "0",
        "nullable": "YES"
      },
      {
        "type": "integer",
        "column": "total_coins",
        "default": "100",
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "avatar_url",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "email",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "text",
        "column": "full_name",
        "default": null,
        "nullable": "YES"
      },
      {
        "type": "text",
        "column": "username",
        "default": null,
        "nullable": "NO"
      },
      {
        "type": "timestamp with time zone",
        "column": "created_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "timestamp with time zone",
        "column": "updated_at",
        "default": "now()",
        "nullable": "YES"
      },
      {
        "type": "uuid",
        "column": "id",
        "default": null,
        "nullable": "NO"
      }
    ],
    "policies": [
      {
        "roles": [
          "public"
        ],
        "command": "INSERT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can insert their own profile"
      },
      {
        "roles": [
          "public"
        ],
        "command": "UPDATE",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can update their own profile"
      },
      {
        "roles": [
          "public"
        ],
        "command": "SELECT",
        "permissive": "PERMISSIVE",
        "policy_name": "Users can view their own profile"
      }
    ]
  }
]